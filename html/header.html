<!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <head>
        <link
            rel="stylesheet"
            href="../assets/bootstrap-5.1.3-dist/css/bootstrap.min.css"
        />
        <!-- import jquery -->
        <script src="../assets/jquery/jquery-3.6.0.min.js"></script>

        <!-- import ion icon  -->
        <script
            type="module"
            src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
        ></script>
        <script
            nomodule
            src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
        ></script>
        
        <link
            rel="stylesheet"
            type="text/css"
            href="../css/header.css"
        />
        <script src="../js/header.js"></script>
    </head>

    <body>
        <div
            class="navbar fixed-top navbar-light navbar-expand-md justify-content-between p-0"
        >
            <a
                href="/"
                class="d-flex align-items-center mb-lg-0 text-black-50 text-decoration-none"
            >
                <img
                    class="header-logo"
                    src="../image/KIDSVN.png"
                    alt=""
                />
            </a>
            <a
                class="navbar-toggler p-2 me-2 bg-light"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbar"
                href="#navbar"
            >
                <span class="navbar-toggler-icon"></span>
            </a>
            <div
                class="collapse navbar-collapse justify-content-between py-3"
                id="navbar"
            >
                <ul class="navbar-nav mr-auto font-weight-bold">
                    <li>
                        <a
                            href="../index.html"
                            class="nav-link px-2 text-black"
                            >Trang chủ</a
                        >
                    </li>
                    <li>
                        <a
                            href="../html/store.html"
                            class="nav-link px-2 text-black"
                            >Cửa hàng</a
                        >
                    </li>
                    <li class="position-relative">
                        <a class="nav-link px-2 text-black cart">Giỏ hàng</a>
                        <span class="ping"></span>
                    </li>
                    <li>
                        <a
                            href="../html/about-us.html"
                            class="nav-link px-2 text-black"
                            >Về chúng tôi</a
                        >
                    </li>
                </ul>
                <div
                    id="header-btn-group"
                    class="text-end header-btn-group d-flex justify-content-center"
                >
                    <a
                        href="../html/login.html"
                        class="text-decoration-none"
                    >
                        <button type="button" class="btn btn-login me-2">
                            Đăng nhập
                        </button></a
                    >
                    <a
                        href="../html/register.html"
                        class="text-decoration-none"
                    >
                        <button type="button" class="btn btn-register">
                            Đăng ký
                        </button></a
                    >
                </div>
            </div>
        </div>

        <script>
            $(document).ready(function () {
                if (sessionStorage.getItem("phone")) {
                    $(".ping").addClass("active");
                    let cart = localStorage.getItem("cart");
                    if (cart !== null) {
                        $(".ping")
                            .first()
                            .html(findOccurrences(JSON.parse(cart)).length);
                    }
                }
            });
            $(".cart").on("click", function () {
                if (sessionStorage.getItem("phone")) {
                    window.location.assign(
                        "../html/cart.html"
                    );
                } else {
                    window.location.replace(
                        "../html/login.html"
                    );
                }
            });
            const findOccurrences = (arr = []) => {
                const res = [];
                arr.forEach((el) => {
                    const index = res.findIndex((obj) => {
                        return obj["id"] === el;
                    });
                    if (index === -1) {
                        res.push({
                            id: el,
                            count: 1,
                        });
                    } else {
                        res[index]["count"]++;
                    }
                });
                return res;
            };
            $(".cart-icon").click(function () {
                let cart = localStorage.getItem("cart");
                if (cart !== null) {
                    $(".ping")
                        .first()
                        .html(findOccurrences(JSON.parse(cart)).length);
                }
            });
        </script>
    </body>
</html>
<div class="input-group">
    <span class="input-group-btn">
        <button
            type="button"
            class="quantity-left-minus btn btn-number"
            data-type="minus"
            data-field=""
        >
            <ion-icon name="remove-outline"></ion-icon>
        </button>
    </span>
    <input
        type="text"
        id="quantity"
        name="quantity"
        class="form-control input-number text-center"
        value="1"
        min="1"
        max="100"
    />
    <span class="input-group-btn">
        <button
            type="button"
            class="quantity-right-plus btn btn-number"
            data-type="plus"
            data-field=""
        >
            <ion-icon name="add-outline"></ion-icon>
        </button>
    </span>
</div>
